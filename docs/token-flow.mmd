```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    %% Initial Login
    User->>Frontend: Enter credentials
    Frontend->>Backend: POST /login {username, password}
    Backend->>Database: Verify credentials
    Database-->>Backend: User data
    Backend->>Frontend: 200 OK {token, user}
    Frontend->>Frontend: Store authData in localStorage
    Frontend->>Frontend: Set auth state

    %% Token Validation
    Frontend->>Frontend: Parse token
    Frontend->>Frontend: Check expiration
    alt Token expired
        Frontend->>Backend: POST /refresh-token
        Backend->>Database: Verify token
        Database-->>Backend: User data
        Backend->>Frontend: 200 OK {newToken}
        Frontend->>Frontend: Update token in localStorage
    else Token valid
        Frontend->>Frontend: Continue with request
    end

    %% API Request
    Frontend->>Backend: GET /api/endpoint
    Backend->>Backend: Verify token
    alt Token invalid
        Backend-->>Frontend: 401 Unauthorized
        Frontend->>Frontend: Clear auth state
        Frontend->>User: Redirect to login
    else Token valid
        Backend->>Database: Get data
        Database-->>Backend: Data
        Backend->>Frontend: 200 OK {data}
    end

    %% Logout
    User->>Frontend: Click logout
    Frontend->>Frontend: Clear localStorage
    Frontend->>Frontend: Reset auth state
    Frontend->>User: Redirect to login
```
