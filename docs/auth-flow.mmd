```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    %% Login Flow
    User->>Frontend: Enter credentials
    Frontend->>Backend: POST /login {username, password}
    Backend->>Database: Verify credentials
    Database-->>Backend: User data
    Backend->>Frontend: 200 OK {token, user}
    Frontend->>Frontend: Store token in localStorage
    Frontend->>Frontend: Set auth state

    %% Protected Route Access
    User->>Frontend: Access protected route
    Frontend->>Frontend: Check auth state
    Frontend->>Frontend: Validate token
    alt Token expired
        Frontend->>Backend: POST /refresh-token
        Backend->>Database: Verify token
        Database-->>Backend: User data
        Backend->>Frontend: 200 OK {newToken}
        Frontend->>Frontend: Update token
    else Token valid
        Frontend->>Backend: GET /protected
        Backend->>Database: Verify token
        Database-->>Backend: User data
        Backend->>Frontend: 200 OK {data}
    end

    %% Logout Flow
    User->>Frontend: Click logout
    Frontend->>Frontend: Clear localStorage
    Frontend->>Frontend: Reset auth state
    Frontend->>User: Redirect to login

    %% Error Handling
    alt Invalid credentials
        Backend-->>Frontend: 401 Unauthorized
        Frontend->>User: Show error
    else Network error
        Frontend->>User: Show error
    end
```
